# ğŸ“± é é¢é—œè¯çµæ§‹åˆ†æå ±å‘Š

## ğŸ¯ **åˆ†ææ¦‚è¿°**
**åˆ†ææ—¥æœŸ**: 2025-09-17
**ç¯„åœ**: äº¤å‹æ‡‰ç”¨ç¨‹å¼å®Œæ•´é é¢çµæ§‹å’Œå°èˆªé—œä¿‚
**æ–¹æ³•**: ç¨‹å¼ç¢¼éœæ…‹åˆ†æï¼Œæ’é™¤ Playwright æ¸¬è©¦éƒ¨åˆ†

---

## ğŸ“Š **é é¢çµæ§‹ç¸½è¦½**

### **ç¸½è¨ˆé é¢æ•¸**: 14 å€‹

#### **1. èªè­‰ç›¸é—œé é¢** (3å€‹)
- `/` - é¦–é  (å…¥å£é»)
- `/login` - ç™»å…¥é é¢
- `/register` - è¨»å†Šé é¢

#### **2. ä¸»æ‡‰ç”¨ Tab é é¢** (4å€‹)
- `/(tabs)/discover` - æ¢ç´¢/é…å°é é¢
- `/(tabs)/matches` - é…å°åˆ—è¡¨é é¢
- `/(tabs)/messages` - è¨Šæ¯åˆ—è¡¨é é¢
- `/(tabs)/profile` - å€‹äººæª”æ¡ˆé é¢

#### **3. æ·±å±¤åŠŸèƒ½é é¢** (7å€‹)
- `/chat/[id]` - èŠå¤©å°è©±é é¢ (å‹•æ…‹è·¯ç”±)
- `/profile/edit` - ç·¨è¼¯å€‹äººæª”æ¡ˆé é¢ (æ¨¡æ…‹)
- `/settings` - æ‡‰ç”¨ç¨‹å¼è¨­å®šé é¢ (æ¨¡æ…‹)
- `/match/success` - é…å°æˆåŠŸé é¢
- `/(tabs)/_layout` - Tab å°èˆªä½ˆå±€
- `/_layout` - æ ¹ä½ˆå±€ (ProtectedRoute)
- `/+not-found` - 404 éŒ¯èª¤é é¢

---

## ğŸ—ºï¸ **å°èˆªé—œä¿‚çŸ©é™£**

### **èªè­‰æµç¨‹å°èˆª**

| ä¾†æºé é¢ | ç›®æ¨™é é¢ | å°èˆªæ–¹æ³• | æ¢ä»¶ | æª”æ¡ˆä½ç½® |
|---------|---------|----------|------|----------|
| `/` | `/(tabs)/feed` | `router.replace()` | å·²èªè­‰ | `app/index.tsx:8` |
| `/` | `/login` | `router.replace()` | æœªèªè­‰ | `app/index.tsx:11` |
| `/login` | `/register` | `router.push()` | ç”¨æˆ¶é»æ“Šè¨»å†Š | `features/auth/LoginScreen.tsx:45` |
| `/login` | `/(tabs)/discover` | èªè­‰æˆåŠŸå¾Œè‡ªå‹• | ç™»å…¥æˆåŠŸ | èªè­‰é‚è¼¯è™•ç† |
| `/register` | `/login` | `router.back()` | ç”¨æˆ¶é»æ“Šè¿”å› | `features/auth/RegisterScreen.tsx:38` |
| `/register` | `/(tabs)/discover` | èªè­‰æˆåŠŸå¾Œè‡ªå‹• | è¨»å†ŠæˆåŠŸ | èªè­‰é‚è¼¯è™•ç† |

### **Tab é–“å°èˆª**

| Tab é é¢ | å¯ç›´æ¥å°èˆªåˆ° | å°èˆªæ–¹å¼ | å¯¦ç¾ä½ç½® |
|---------|-------------|----------|----------|
| `/(tabs)/discover` | å…¶ä»– 3 å€‹ Tab | Tab åˆ‡æ› | Tab å°èˆªç³»çµ± |
| `/(tabs)/matches` | å…¶ä»– 3 å€‹ Tab | Tab åˆ‡æ› | Tab å°èˆªç³»çµ± |
| `/(tabs)/messages` | å…¶ä»– 3 å€‹ Tab | Tab åˆ‡æ› | Tab å°èˆªç³»çµ± |
| `/(tabs)/profile` | å…¶ä»– 3 å€‹ Tab | Tab åˆ‡æ› | Tab å°èˆªç³»çµ± |

### **æ·±å±¤é é¢å°èˆª**

| ä¾†æºé é¢ | ç›®æ¨™é é¢ | å°èˆªæ–¹æ³• | è§¸ç™¼æ¢ä»¶ | æª”æ¡ˆä½ç½® |
|---------|---------|----------|----------|----------|
| `/(tabs)/messages` | `/chat/[id]` | `router.push()` | é»æ“Šå°è©±é …ç›® | `features/chat/SimpleChatListScreen.tsx:38` |
| `/chat/[id]` | `/(tabs)/messages` | `router.back()` | é»æ“Šè¿”å›æŒ‰éˆ• | `features/chat/ChatScreen.tsx:28` |
| `/(tabs)/profile` | `/profile/edit` | `router.push()` | é»æ“Šç·¨è¼¯æª”æ¡ˆ | `features/profile/SimpleProfileScreen.tsx:22` |
| `/(tabs)/profile` | `/settings` | `router.push()` | é»æ“Šåå¥½è¨­å®š | `features/profile/SimpleProfileScreen.tsx:26` |
| `/profile/edit` | `/(tabs)/profile` | æ¨¡æ…‹é—œé–‰ | å®Œæˆç·¨è¼¯ | æ¨¡æ…‹è‡ªå‹•è™•ç† |
| `/settings` | `/(tabs)/profile` | æ¨¡æ…‹é—œé–‰ | å®Œæˆè¨­å®š | æ¨¡æ…‹è‡ªå‹•è™•ç† |

---

## ğŸ”— **é é¢ä¾è³´é—œä¿‚åˆ†æ**

### **1. èªè­‰ä¾è³´**
```
ProtectedRoute (æ ¹ä½ˆå±€)
â”œâ”€â”€ æª¢æŸ¥èªè­‰ç‹€æ…‹
â”œâ”€â”€ å·²èªè­‰ â†’ å…è¨±å­˜å– Tab é é¢å’Œæ·±å±¤é é¢
â””â”€â”€ æœªèªè­‰ â†’ é‡å®šå‘åˆ° /login
```

### **2. Tab å°èˆªä¾è³´**
```
(tabs)/_layout.tsx
â”œâ”€â”€ discover.tsx (æ¢ç´¢é é¢)
â”œâ”€â”€ matches.tsx (é…å°é é¢)
â”œâ”€â”€ messages.tsx (è¨Šæ¯é é¢)
â””â”€â”€ profile.tsx (å€‹äººæª”æ¡ˆé é¢)
```

### **3. æ¨¡æ…‹é é¢ä¾è³´**
```
æ ¹ä½ˆå±€é…ç½®
â”œâ”€â”€ profile/edit â†’ æ¨¡æ…‹å‘ˆç¾ (presentation: 'modal')
â””â”€â”€ settings â†’ æ¨¡æ…‹å‘ˆç¾ (presentation: 'modal')
```

### **4. å‹•æ…‹è·¯ç”±ä¾è³´**
```
chat/[id].tsx
â”œâ”€â”€ ä¾è³´ useLocalSearchParams() ç²å– id åƒæ•¸
â”œâ”€â”€ å¾ messages é é¢å‚³å…¥å°è©± ID
â””â”€â”€ å¯è¿”å›åˆ° messages é é¢
```

---

## ğŸ“‹ **è·¯ç”±åƒæ•¸ä½¿ç”¨**

### **å‹•æ…‹è·¯ç”±åƒæ•¸**
| é é¢ | åƒæ•¸åç¨± | åƒæ•¸é¡å‹ | ä½¿ç”¨æ–¹å¼ | æª”æ¡ˆä½ç½® |
|------|---------|----------|----------|----------|
| `/chat/[id]` | `id` | `string` | `useLocalSearchParams()` | `features/chat/ChatScreen.tsx:24` |

### **æ½›åœ¨æŸ¥è©¢åƒæ•¸**
| é é¢ | å¯èƒ½åƒæ•¸ | ç”¨é€” | ç‹€æ…‹ |
|------|---------|------|------|
| `/login` | `redirect` | ç™»å…¥å¾Œé‡å®šå‘ | å¾…å¯¦ç¾ |
| `/register` | `invite` | é‚€è«‹ç¢¼ | å¾…å¯¦ç¾ |
| `/match/success` | `matchId` | é…å° ID | å¾…ç¢ºèª |

---

## ğŸ¯ **å°èˆªæ¨¡å¼åˆ†æ**

### **1. æ¨é€å°èˆª (Push Navigation)**
- **ä½¿ç”¨å ´æ™¯**: é€²å…¥æ–°é é¢ï¼Œéœ€è¦è¿”å›åŠŸèƒ½
- **å¯¦ç¾æ–¹å¼**: `router.push()`
- **ç¯„ä¾‹**:
  - Login â†’ Register
  - Messages â†’ Chat
  - Profile â†’ Edit Profile
  - Profile â†’ Settings

### **2. æ›¿æ›å°èˆª (Replace Navigation)**
- **ä½¿ç”¨å ´æ™¯**: èªè­‰æµç¨‹ï¼Œä¸éœ€è¦è¿”å›
- **å¯¦ç¾æ–¹å¼**: `router.replace()`
- **ç¯„ä¾‹**:
  - Index â†’ Login (æœªèªè­‰)
  - Index â†’ Discover (å·²èªè­‰)

### **3. è¿”å›å°èˆª (Back Navigation)**
- **ä½¿ç”¨å ´æ™¯**: è¿”å›ä¸Šä¸€å€‹é é¢
- **å¯¦ç¾æ–¹å¼**: `router.back()`
- **ç¯„ä¾‹**:
  - Register â†’ Login
  - Chat â†’ Messages

### **4. Tab åˆ‡æ›å°èˆª**
- **ä½¿ç”¨å ´æ™¯**: ä¸»æ‡‰ç”¨å…§é é¢åˆ‡æ›
- **å¯¦ç¾æ–¹å¼**: Tab å°èˆªç³»çµ±
- **ç¯„ä¾‹**: Discover â†” Matches â†” Messages â†” Profile

### **5. æ¨¡æ…‹å°èˆª**
- **ä½¿ç”¨å ´æ™¯**: è‡¨æ™‚è¨­å®šæˆ–ç·¨è¼¯åŠŸèƒ½
- **å¯¦ç¾æ–¹å¼**: `presentation: 'modal'`
- **ç¯„ä¾‹**: Profile Edit, Settings

---

## ğŸ”„ **é é¢ç‹€æ…‹å’Œç”Ÿå‘½é€±æœŸ**

### **èªè­‰ç›¸é—œé é¢**
```
index.tsx (å…¥å£)
â”œâ”€â”€ æª¢æŸ¥èªè­‰ç‹€æ…‹
â”œâ”€â”€ Loading ç‹€æ…‹é¡¯ç¤º
â”œâ”€â”€ å·²èªè­‰ â†’ é‡å®šå‘åˆ°ä¸»æ‡‰ç”¨
â””â”€â”€ æœªèªè­‰ â†’ é‡å®šå‘åˆ°ç™»å…¥
```

### **Tab é é¢ç‹€æ…‹**
```
Tab é é¢ (discover, matches, messages, profile)
â”œâ”€â”€ éœ€è¦èªè­‰ä¿è­·
â”œâ”€â”€ å…±äº« Tab å°èˆªç‹€æ…‹
â”œâ”€â”€ å¯ä»¥å¿«é€Ÿåˆ‡æ›
â””â”€â”€ ä¿æŒé é¢ç‹€æ…‹
```

### **æ·±å±¤é é¢ç‹€æ…‹**
```
Chaté é¢
â”œâ”€â”€ æ¥æ”¶è·¯ç”±åƒæ•¸ (conversation ID)
â”œâ”€â”€ è¼‰å…¥å°è©±æ­·å²
â”œâ”€â”€ ç¶­è­·å³æ™‚é€£æ¥ç‹€æ…‹
â””â”€â”€ æ”¯æ´è¿”å›å°èˆª
```

### **æ¨¡æ…‹é é¢ç‹€æ…‹**
```
Edit Profile / Settings
â”œâ”€â”€ æ¨¡æ…‹å‘ˆç¾æ–¹å¼
â”œâ”€â”€ ä¸å½±éŸ¿åº•å±¤é é¢ç‹€æ…‹
â”œâ”€â”€ å®Œæˆå¾Œè‡ªå‹•é—œé–‰
â””â”€â”€ æ•¸æ“šå¯èƒ½éœ€è¦åŒæ­¥æ›´æ–°
```

---

## ğŸ› ï¸ **æŠ€è¡“å¯¦ç¾è©³æƒ…**

### **å°èˆªå·¥å…·å’Œæ–¹æ³•**
| æ–¹æ³• | ç”¨é€” | æª”æ¡ˆä¸­çš„ä½¿ç”¨ |
|------|------|-------------|
| `router.push()` | æ¨é€æ–°é é¢ | 8+ å€‹ä½ç½® |
| `router.replace()` | æ›¿æ›ç•¶å‰é é¢ | èªè­‰æµç¨‹ |
| `router.back()` | è¿”å›ä¸Šä¸€é  | è¨»å†Šé é¢ã€èŠå¤©é é¢ |
| `useLocalSearchParams()` | ç²å–è·¯ç”±åƒæ•¸ | Chat é é¢ |

### **ä½ˆå±€é…ç½®**
```typescript
// _layout.tsx ä¸­çš„æ¨¡æ…‹é…ç½®
<Stack.Screen
  name="profile/edit"
  options={{
    headerShown: false,
    presentation: 'modal'
  }}
/>
<Stack.Screen
  name="settings"
  options={{
    headerShown: false,
    presentation: 'modal'
  }}
/>
```

### **èªè­‰ä¿è­·å¯¦ç¾**
```typescript
// ProtectedRoute çµ„ä»¶åŒ…è£
<ProtectedRoute>
  <Slot />
</ProtectedRoute>
```

---

## ğŸ“Š **é é¢é—œè¯çµ±è¨ˆ**

### **å°èˆªæ·±åº¦åˆ†æ**
- **æœ€å¤§å°èˆªæ·±åº¦**: 3 å±¤ (Index â†’ Tab â†’ Chat)
- **èªè­‰ç›¸é—œé é¢**: 3 å€‹
- **Tab å±¤ç´šé é¢**: 4 å€‹
- **æ·±å±¤åŠŸèƒ½é é¢**: 7 å€‹
- **æ¨¡æ…‹é é¢**: 2 å€‹
- **å‹•æ…‹è·¯ç”±é é¢**: 1 å€‹

### **å°èˆªæ–¹æ³•ä½¿ç”¨çµ±è¨ˆ**
- **router.push()**: 6+ æ¬¡ä½¿ç”¨
- **router.replace()**: 2 æ¬¡ä½¿ç”¨ (èªè­‰æµç¨‹)
- **router.back()**: 2 æ¬¡ä½¿ç”¨
- **Tab åˆ‡æ›**: 4 å€‹ Tab é–“çš„å°èˆª
- **æ¨¡æ…‹å‘ˆç¾**: 2 å€‹é é¢

---

## ğŸ” **æ½›åœ¨å•é¡Œå’Œå»ºè­°**

### **ç™¼ç¾çš„å•é¡Œ**
1. **å°èˆªä¸€è‡´æ€§**: æŸäº›é é¢ç¼ºå°‘æ¨™æº–çš„è¿”å›æŒ‰éˆ•
2. **æ·±å±¤é€£çµ**: ç¼ºå°‘å°æ·±å±¤é€£çµçš„è™•ç†
3. **ç‹€æ…‹ä¿æŒ**: Tab åˆ‡æ›æ™‚å¯èƒ½ä¸ä¿æŒé é¢ç‹€æ…‹
4. **éŒ¯èª¤è™•ç†**: å°èˆªå¤±æ•—æ™‚çš„éŒ¯èª¤è™•ç†æ©Ÿåˆ¶ä¸æ˜ç¢º

### **æ”¹é€²å»ºè­°**
1. **çµ±ä¸€å°èˆªæ¨¡å¼**: å»ºç«‹ä¸€è‡´çš„å°èˆª UI æ¨¡å¼
2. **å¢åŠ æ·±å±¤é€£çµ**: æ”¯æ´å¤–éƒ¨é€£çµç›´æ¥æ‰“é–‹ç‰¹å®šé é¢
3. **ç‹€æ…‹ç®¡ç†**: å¯¦ç¾é é¢ç‹€æ…‹ä¿æŒæ©Ÿåˆ¶
4. **å°èˆªä¿è­·**: å¢åŠ å°èˆªæ¬Šé™å’Œé©—è­‰æ©Ÿåˆ¶

---

## ğŸ¯ **ç¸½çµ**

### **æ ¸å¿ƒç™¼ç¾**
1. **å®Œæ•´çš„é é¢æ¶æ§‹**: 14 å€‹é é¢æ¶µè“‹å®Œæ•´çš„ç”¨æˆ¶æµç¨‹
2. **æ¸…æ™°çš„å°èˆªå±¤æ¬¡**: èªè­‰ â†’ Tab â†’ æ·±å±¤é é¢çš„ä¸‰å±¤çµæ§‹
3. **åˆç†çš„æŠ€è¡“é¸æ“‡**: Expo Router + æª”æ¡ˆè·¯ç”±ç³»çµ±
4. **è‰¯å¥½çš„åˆ†é›¢**: èªè­‰ã€ä¸»åŠŸèƒ½ã€è¨­å®šåŠŸèƒ½åˆ†é›¢æ¸…æ¥š

### **æ¶æ§‹å„ªå‹¢**
1. **æª”æ¡ˆè·¯ç”±**: ç°¡åŒ–è·¯ç”±é…ç½®å’Œç®¡ç†
2. **æ¨¡æ…‹è¨­è¨ˆ**: é©åˆç§»å‹•ç«¯çš„ UX è¨­è¨ˆ
3. **èªè­‰ä¿è­·**: çµ±ä¸€çš„èªè­‰æª¢æŸ¥æ©Ÿåˆ¶
4. **åƒæ•¸å‚³é**: æ”¯æ´å‹•æ…‹è·¯ç”±åƒæ•¸

### **æŠ€è¡“å»ºè­°**
1. **ç¹¼çºŒå®Œå–„å°èˆªé‚è¼¯**: ç‰¹åˆ¥æ˜¯éŒ¯èª¤è™•ç†å’Œé‚Šç•Œæƒ…æ³
2. **åŠ å¼·ç‹€æ…‹ç®¡ç†**: ç¢ºä¿é é¢é–“çš„æ•¸æ“šåŒæ­¥
3. **å„ªåŒ–ç”¨æˆ¶é«”é©—**: å¯¦ç¾æµæš¢çš„é é¢è½‰æ›å‹•ç•«
4. **å»ºç«‹å°èˆªæ¸¬è©¦**: ç¢ºä¿æ‰€æœ‰å°èˆªè·¯å¾‘çš„ç©©å®šæ€§

---

**åˆ†æå®Œæˆæ™‚é–“**: 2025-09-17
**æ–‡æª”ç‰ˆæœ¬**: v1.0.0
**ç¶­è­·è€…**: Claude Code Assistant